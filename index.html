<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Be My Valentine üíñ</title>

  <style>
    :root { color-scheme: light; }

    body{
      margin:0;
      min-height:100vh;
      display:grid;
      place-items:center;
      background: linear-gradient(135deg, #ffd6e8, #fff5fb);
      font-family: Georgia, "Times New Roman", serif;
    }

    .card{
      width:min(760px, 92vw);
      background: rgba(255,255,255,0.96);
      border-radius: 26px;
      padding: 46px 36px;
      box-shadow: 0 20px 60px rgba(0,0,0,.15);
      text-align:center;
      position:relative;
      overflow:hidden;
    }

    h1{
      margin: 0 0 14px;
      font-size: clamp(32px, 4vw, 52px);
      color:#c2185b;
      letter-spacing:.2px;
    }

    p{
      margin: 0 auto 26px;
      max-width: 58ch;
      font-size: 18px;
      line-height:1.75;
      color:#444;
    }

    .buttons{
      position:relative;
      height: 104px;               /* room for smooth movement */
      display:flex;
      justify-content:center;
      align-items:center;
      gap: 18px;
      user-select:none;
      overflow: hidden;            /* keep No inside */
      border-radius: 18px;
    }

    button{
      border:0;
      padding: 14px 22px;
      border-radius: 18px;
      font-size: 18px;
      cursor:pointer;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      transition: transform .18s ease, box-shadow .18s ease, opacity .18s ease;
      touch-action: manipulation;
    }

    #yesBtn{
      background:#ff2e6f;
      color:white;
      box-shadow: 0 12px 28px rgba(255,46,111,.35);
      position: relative;
      z-index: 3;                  /* Always above everything */
    }
    #yesBtn:hover{ transform: translateY(-2px) scale(1.03); }
    #yesBtn:active{ transform: translateY(0px) scale(.99); }

    #noBtn{
      background:#f2f2f2;
      color:#333;
      position:absolute;
      left: 70%;
      top: 12px;
      box-shadow: 0 10px 22px rgba(0,0,0,.10);
      transition: left 0.55s ease, top 0.55s ease; /* smooth */
      will-change: left, top;
      z-index: 1;                  /* Always under Yes */
    }

    .footer{
      margin-top: 18px;
      font-size: 14px;
      color:#777;
      font-style: italic;
    }

    /* Floating hearts in background */
    .heart{
      position:absolute;
      bottom:-30px;
      opacity: 0;
      animation: floatUp 6.2s linear infinite;
      pointer-events:none;
      filter: drop-shadow(0 6px 10px rgba(0,0,0,.10));
    }
    @keyframes floatUp{
      0%   { transform: translateY(0) scale(.85); opacity: 0; }
      10%  { opacity: .7; }
      70%  { opacity: .55; }
      100% { transform: translateY(-600px) translateX(var(--drift)) scale(1.25); opacity: 0; }
    }

    /* ===== Romantic popup modal ===== */
    .modal{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.45);
      display: none;
      align-items: center;
      justify-content: center;
      padding: 18px;
      z-index: 999;
    }
    .modal.show{ display:flex; }

    .modal-card{
      width: min(520px, 92vw);
      background: rgba(255,255,255,.98);
      border-radius: 22px;
      padding: 26px 22px 18px;
      box-shadow: 0 24px 70px rgba(0,0,0,.22);
      text-align:center;
      position: relative;
      overflow: hidden;
    }

    .modal-title{
      margin: 0 0 6px;
      font-family: Georgia, "Times New Roman", serif;
      font-size: 26px;
      color:#c2185b;
    }
    .modal-text{
      margin: 0 0 16px;
      color:#444;
      line-height: 1.6;
      font-size: 16px;
    }

    .modal-actions{
      display:flex;
      gap: 10px;
      justify-content:center;
      flex-wrap: wrap;
    }

    .secondary{
      background:#f2f2f2;
      color:#333;
      box-shadow: 0 10px 22px rgba(0,0,0,.08);
    }

    /* Heart burst animation */
    .burst{
      position:absolute;
      inset: 0;
      pointer-events:none;
    }
    .burst span{
      position:absolute;
      left: 50%;
      top: 55%;
      transform: translate(-50%, -50%) scale(0.6);
      opacity: 0;
      animation: pop 1.25s ease forwards;
      font-size: 22px;
      filter: drop-shadow(0 10px 18px rgba(0,0,0,.15));
    }
    @keyframes pop{
      0%   { opacity: 0; transform: translate(-50%, -50%) scale(.6); }
      12%  { opacity: 1; }
      100% { opacity: 0; transform: translate(calc(-50% + var(--dx)), calc(-50% + var(--dy))) scale(1.35); }
    }
  </style>
</head>

<body>
  <div class="card" id="card">
    <h1>Will you be my Valentine? üíñ</h1>

    <p>
      Out of all the people in the world‚Ä¶ my heart keeps choosing you.
      <br><br>
      Will you make this Valentine‚Äôs Day a little more magical with me? üåπ
    </p>

    <div class="buttons" id="btnArea">
      <button id="yesBtn" type="button">Yes, always ‚ù§Ô∏è</button>
      <button id="noBtn" type="button" aria-disabled="true" tabindex="-1">No üôà</button>
    </div>

    <div class="footer">(Some choices are simply meant to be üíò)</div>
  </div>

  <!-- Romantic popup -->
  <div class="modal" id="modal" aria-hidden="true">
    <div class="modal-card" role="dialog" aria-modal="true" aria-label="Valentine popup">
      <div class="burst" id="burst"></div>
      <h2 class="modal-title">My heart just did a happy dance üíò</h2>
      <p class="modal-text">
        You‚Äôre my favorite person, my home, and my forever.<br>
        Happy Valentine‚Äôs Day, love. üåπ
      </p>
      <div class="modal-actions">
        <button id="sendEmailBtn" type="button">Send the love üíå</button>
        <button id="closeBtn" type="button" class="secondary">Close</button>
      </div>
    </div>
  </div>

  <script>
    // ============================================
    // CONFIG ‚Äî change to your husband's email
    // ============================================
    const RECIPIENT_EMAIL = "husband@example.com"; // <-- CHANGE THIS
    const EMAIL_SUBJECT = "My Valentine üíå";
    const EMAIL_BODY =
`Hi love,

Yes ‚ù§Ô∏è I would love to be your Valentine.

You are my favorite person, my home, and my forever. üåπüíñ

Love,
Your Wife`;

    // ============================================
    // Background floating hearts
    // ============================================
    const card = document.getElementById("card");
    const floatHearts = ["üíñ","üíï","üíò","‚ù§Ô∏è","üåπ","üíû"];

    function spawnFloatHeart(){
      const h = document.createElement("div");
      h.className = "heart";
      h.textContent = floatHearts[Math.floor(Math.random() * floatHearts.length)];
      h.style.left = (Math.random() * 100) + "%";
      h.style.fontSize = (14 + Math.random() * 18) + "px";
      h.style.setProperty("--drift", (Math.random() * 160 - 80).toFixed(0) + "px");
      card.appendChild(h);
      setTimeout(() => h.remove(), 6800);
    }
    setInterval(spawnFloatHeart, 800);

    // ============================================
    // YES: show romantic popup + heart burst
    // ============================================
    const yesBtn = document.getElementById("yesBtn");
    const modal = document.getElementById("modal");
    const burst = document.getElementById("burst");
    const sendEmailBtn = document.getElementById("sendEmailBtn");
    const closeBtn = document.getElementById("closeBtn");

    function makeMailto(){
      return `mailto:${encodeURIComponent(RECIPIENT_EMAIL)}`
        + `?subject=${encodeURIComponent(EMAIL_SUBJECT)}`
        + `&body=${encodeURIComponent(EMAIL_BODY)}`;
    }

    function showModal(){
      modal.classList.add("show");
      modal.setAttribute("aria-hidden", "false");
      playBurst();
    }

    function hideModal(){
      modal.classList.remove("show");
      modal.setAttribute("aria-hidden", "true");
    }

    function playBurst(){
      burst.innerHTML = "";
      const burstHearts = ["üíñ","üíò","‚ù§Ô∏è","üíï","üíû","üåπ"];
      for(let i=0;i<18;i++){
        const s = document.createElement("span");
        s.textContent = burstHearts[Math.floor(Math.random()*burstHearts.length)];
        const angle = Math.random() * Math.PI * 2;
        const radius = 80 + Math.random() * 120;
        const dx = Math.cos(angle) * radius;
        const dy = Math.sin(angle) * radius - (40 + Math.random()*40);
        s.style.setProperty("--dx", dx.toFixed(0) + "px");
        s.style.setProperty("--dy", dy.toFixed(0) + "px");
        s.style.animationDelay = (Math.random() * 0.22).toFixed(2) + "s";
        s.style.fontSize = (18 + Math.random()*18).toFixed(0) + "px";
        burst.appendChild(s);
      }
    }

    yesBtn.addEventListener("click", () => {
      showModal();
    });

    sendEmailBtn.addEventListener("click", () => {
      window.location.href = makeMailto();
    });

    closeBtn.addEventListener("click", hideModal);

    // Click outside modal-card closes
    modal.addEventListener("click", (e) => {
      if (e.target === modal) hideModal();
    });

    // ESC closes
    window.addEventListener("keydown", (e) => {
      if (e.key === "Escape" && modal.classList.contains("show")) hideModal();
    });

    // ============================================
    // NO: always stays away from cursor and NEVER overlaps Yes
    // ============================================
    const noBtn = document.getElementById("noBtn");
    const area  = document.getElementById("btnArea");

    // Keep No under Yes visually, and also ensure it cannot block clicks:
    noBtn.style.pointerEvents = "auto"; // we still want hover/move logic
    // If you want it literally unclickable, uncomment next line:
    // noBtn.style.pointerEvents = "none";

    function clamp(n, min, max){ return Math.max(min, Math.min(max, n)); }

    function rectsOverlap(ax, ay, aw, ah, bx, by, bw, bh, pad=10){
      // pad expands bx/by/bw/bh (Yes area) a bit for safety
      const bLeft = bx - pad, bTop = by - pad, bRight = bx + bw + pad, bBottom = by + bh + pad;
      const aLeft = ax, aTop = ay, aRight = ax + aw, aBottom = ay + ah;
      return !(aRight < bLeft || aLeft > bRight || aBottom < bTop || aTop > bBottom);
    }

    function pickFarPosition(px, py){
      const areaRect = area.getBoundingClientRect();
      const yesRect  = yesBtn.getBoundingClientRect();
      const noRect   = noBtn.getBoundingClientRect();

      const maxX = Math.max(0, areaRect.width - noRect.width);
      const maxY = Math.max(0, areaRect.height - noRect.height);

      // cursor relative to area
      const relX = px - areaRect.left;
      const relY = py - areaRect.top;

      // Aim for opposite corner
      let targetX = (relX < areaRect.width/2) ? maxX : 0;
      let targetY = (relY < areaRect.height/2) ? maxY : 0;

      // Add playful randomness
      targetX += (Math.random()*90 - 45);
      targetY += (Math.random()*60 - 30);

      // Clamp
      targetX = clamp(targetX, 0, maxX);
      targetY = clamp(targetY, 0, maxY);

      // Convert yesRect to coordinates inside area
      const yesX = yesRect.left - areaRect.left;
      const yesY = yesRect.top  - areaRect.top;
      const yesW = yesRect.width;
      const yesH = yesRect.height;

      // If target overlaps Yes, try a few alternate picks
      for(let tries=0; tries<12; tries++){
        const overlapsYes = rectsOverlap(targetX, targetY, noRect.width, noRect.height, yesX, yesY, yesW, yesH, 14);
        if(!overlapsYes) return {x: targetX, y: targetY};

        // Alternate corners + random scatter until no overlap
        const corner = tries % 4;
        let x = (corner === 0 || corner === 2) ? 0 : maxX;
        let y = (corner === 0 || corner === 1) ? 0 : maxY;

        x += (Math.random()*110 - 55);
        y += (Math.random()*70  - 35);

        x = clamp(x, 0, maxX);
        y = clamp(y, 0, maxY);

        targetX = x; targetY = y;
      }

      // Fallback (still clamped) ‚Äì should be rare
      return {x: targetX, y: targetY};
    }

    let throttled = false;
    function moveNoAway(px, py){
      if (throttled) return;      // avoid jitter
      throttled = true;

      // small delay keeps it smooth/teasing
      setTimeout(() => {
        const pos = pickFarPosition(px, py);
        noBtn.style.left = `${pos.x}px`;
        noBtn.style.top  = `${pos.y}px`;
        throttled = false;
      }, 120);
    }

    // Start it away from Yes initially
    (function initialPlace(){
      const areaRect = area.getBoundingClientRect();
      const px = areaRect.left + areaRect.width * 0.25;
      const py = areaRect.top  + areaRect.height * 0.25;
      const pos = pickFarPosition(px, py);
      noBtn.style.left = `${pos.x}px`;
      noBtn.style.top  = `${pos.y}px`;
    })();

    // Always move away from cursor inside area
    area.addEventListener("mousemove", (e) => moveNoAway(e.clientX, e.clientY));
    area.addEventListener("pointermove", (e) => moveNoAway(e.clientX, e.clientY), { passive:true });

    // Touch devices
    area.addEventListener("touchstart", (e) => {
      const t = e.touches && e.touches[0];
      if (t) moveNoAway(t.clientX, t.clientY);
    }, { passive:true });

    // If somehow clicked, do nothing and move away
    noBtn.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const r = area.getBoundingClientRect();
      moveNoAway(r.left + r.width/2, r.top + r.height/2);
    });

    // Keep No inside bounds on resize and also avoid Yes
    window.addEventListener("resize", () => {
      const areaRect = area.getBoundingClientRect();
      const pos = pickFarPosition(areaRect.left + 10, areaRect.top + 10);
      noBtn.style.left = `${pos.x}px`;
      noBtn.style.top  = `${pos.y}px`;
    });
  </script>
</body>
</html>
